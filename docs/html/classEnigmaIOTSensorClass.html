<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EnigmaIOT: EnigmaIOTSensorClass Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo text inside.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EnigmaIOT
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">Secure sensor and gateway platform based on ESP8266</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classEnigmaIOTSensorClass-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">EnigmaIOTSensorClass Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main sensor node class. Manages communication with gateway and allows sending and receiving user data.  
 <a href="classEnigmaIOTSensorClass.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad429c9d6b530fc34622109c851fd9f2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#ad429c9d6b530fc34622109c851fd9f2f">begin</a> (<a class="el" href="classComms__halClass.html">Comms_halClass</a> *<a class="el" href="classEnigmaIOTSensorClass.html#af9ae297c2db34105e0a0021241c0c509">comm</a>, uint8_t *<a class="el" href="classEnigmaIOTSensorClass.html#aa23a4d05eee44beb862682e3ea9ab1ac">gateway</a>, bool <a class="el" href="classEnigmaIOTSensorClass.html#a1315e688792578c58e5f60cf77250e7d">useCounter</a>=true, bool sleepy=true)</td></tr>
<tr class="memdesc:ad429c9d6b530fc34622109c851fd9f2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initalizes communication basic data and starts node registration.  <a href="#ad429c9d6b530fc34622109c851fd9f2f">More...</a><br /></td></tr>
<tr class="separator:ad429c9d6b530fc34622109c851fd9f2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae9fad86d2a2a409f98a22016a85e381"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#aae9fad86d2a2a409f98a22016a85e381">handle</a> ()</td></tr>
<tr class="memdesc:aae9fad86d2a2a409f98a22016a85e381"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method should be called periodically for instance inside <code><a class="el" href="enigmaiot__gateway_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop()</a></code> function. It is used for internal node maintenance tasks.  <a href="#aae9fad86d2a2a409f98a22016a85e381">More...</a><br /></td></tr>
<tr class="separator:aae9fad86d2a2a409f98a22016a85e381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b81bcdafcd5e2d1f0443668ec0e9b68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a3b81bcdafcd5e2d1f0443668ec0e9b68">setLed</a> (uint8_t <a class="el" href="classEnigmaIOTSensorClass.html#a4feaa9f155e6ba6bc3a285af6c7cbfaf">led</a>, time_t onTime=100)</td></tr>
<tr class="memdesc:a3b81bcdafcd5e2d1f0443668ec0e9b68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a LED to be flashed every time a message is transmitted.  <a href="#a3b81bcdafcd5e2d1f0443668ec0e9b68">More...</a><br /></td></tr>
<tr class="separator:a3b81bcdafcd5e2d1f0443668ec0e9b68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66162b98fc51e16f36c53c4eddd83f04"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a66162b98fc51e16f36c53c4eddd83f04">sendData</a> (const uint8_t *data, size_t len)</td></tr>
<tr class="memdesc:a66162b98fc51e16f36c53c4eddd83f04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a data message transmission.  <a href="#a66162b98fc51e16f36c53c4eddd83f04">More...</a><br /></td></tr>
<tr class="separator:a66162b98fc51e16f36c53c4eddd83f04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbdb3e0b4a47b285a35430dcc38246e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#abbdb3e0b4a47b285a35430dcc38246e7">onDataRx</a> (<a class="el" href="EnigmaIOTSensor_8h.html#a0cc35f87b85e305db04de5c4d77018c7">onSensorDataRx_t</a> handler)</td></tr>
<tr class="memdesc:abbdb3e0b4a47b285a35430dcc38246e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines a function callback that will be called on every downlink data message that is received from gateway.  <a href="#abbdb3e0b4a47b285a35430dcc38246e7">More...</a><br /></td></tr>
<tr class="separator:abbdb3e0b4a47b285a35430dcc38246e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc43b1a7a07c09b20478b918c9ee2e79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#abc43b1a7a07c09b20478b918c9ee2e79">onConnected</a> (<a class="el" href="EnigmaIOTSensor_8h.html#a37ce04fd79315c001e113198fab23386">onConnected_t</a> handler)</td></tr>
<tr class="memdesc:abc43b1a7a07c09b20478b918c9ee2e79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines a function callback that will be called everytime node is registered on gateway.  <a href="#abc43b1a7a07c09b20478b918c9ee2e79">More...</a><br /></td></tr>
<tr class="separator:abc43b1a7a07c09b20478b918c9ee2e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a60078a2b6dda3ed3f832547534fc3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a36a60078a2b6dda3ed3f832547534fc3">onDisconnected</a> (<a class="el" href="EnigmaIOTSensor_8h.html#ac989871ff2fef9419b7b3917b270ea26">onDisconnected_t</a> handler)</td></tr>
<tr class="memdesc:a36a60078a2b6dda3ed3f832547534fc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines a function callback that will be called everytime node is disconnected from gateway.  <a href="#a36a60078a2b6dda3ed3f832547534fc3">More...</a><br /></td></tr>
<tr class="separator:a36a60078a2b6dda3ed3f832547534fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1d728febf16f6dfd479c36947a789b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#ae1d728febf16f6dfd479c36947a789b1">sleep</a> (uint64_t time)</td></tr>
<tr class="memdesc:ae1d728febf16f6dfd479c36947a789b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests transition to sleep mode (low energy state)  <a href="#ae1d728febf16f6dfd479c36947a789b1">More...</a><br /></td></tr>
<tr class="separator:ae1d728febf16f6dfd479c36947a789b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2169866121e8aded5e7970717acdaed8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a2169866121e8aded5e7970717acdaed8">checkCRC</a> (const uint8_t *buf, size_t count, uint32_t *crc)</td></tr>
<tr class="memdesc:a2169866121e8aded5e7970717acdaed8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check that a given CRC matches to calulated value from a buffer.  <a href="#a2169866121e8aded5e7970717acdaed8">More...</a><br /></td></tr>
<tr class="separator:a2169866121e8aded5e7970717acdaed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7df5872c61adb030459e2186e162956d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a7df5872c61adb030459e2186e162956d">clientHello</a> ()</td></tr>
<tr class="memdesc:a7df5872c61adb030459e2186e162956d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a <b>ClientHello</b> messange and send it to gateway.  <a href="#a7df5872c61adb030459e2186e162956d">More...</a><br /></td></tr>
<tr class="separator:a7df5872c61adb030459e2186e162956d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad074353ba790ddfd4214b39b517861df"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#ad074353ba790ddfd4214b39b517861df">processServerHello</a> (const uint8_t mac[6], const uint8_t *buf, size_t count)</td></tr>
<tr class="memdesc:ad074353ba790ddfd4214b39b517861df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a buffer containing a <b>ServerHello</b> message and process it. It uses that message to calculate a shared key using Diffie Hellman algorithm.  <a href="#ad074353ba790ddfd4214b39b517861df">More...</a><br /></td></tr>
<tr class="separator:ad074353ba790ddfd4214b39b517861df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa01e608909a74a2ab03c1715631d594"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#afa01e608909a74a2ab03c1715631d594">processCipherFinished</a> (const uint8_t mac[6], const uint8_t *buf, size_t count)</td></tr>
<tr class="memdesc:afa01e608909a74a2ab03c1715631d594"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a buffer containing a <b>CipherFinished</b> message and process it. It checks that gateway key is correct by decrypting this message random payload.  <a href="#afa01e608909a74a2ab03c1715631d594">More...</a><br /></td></tr>
<tr class="separator:afa01e608909a74a2ab03c1715631d594"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac232abe8c29f115acfb080e65e4511ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="EnigmaIOTSensor_8h.html#aec9e5a1bf0ed7f6cb25f7b940fa8d939">sensorInvalidateReason_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#ac232abe8c29f115acfb080e65e4511ff">processInvalidateKey</a> (const uint8_t mac[6], const uint8_t *buf, size_t count)</td></tr>
<tr class="memdesc:ac232abe8c29f115acfb080e65e4511ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a buffer containing an <b>InvalidateKey</b> message and process it. This trigger a new key agreement to start.  <a href="#ac232abe8c29f115acfb080e65e4511ff">More...</a><br /></td></tr>
<tr class="separator:ac232abe8c29f115acfb080e65e4511ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea17db18cc3ce992be92e228d7ca4acc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#aea17db18cc3ce992be92e228d7ca4acc">keyExchangeFinished</a> ()</td></tr>
<tr class="memdesc:aea17db18cc3ce992be92e228d7ca4acc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build and send a <b>keyExchangeFinished</b> message.  <a href="#aea17db18cc3ce992be92e228d7ca4acc">More...</a><br /></td></tr>
<tr class="separator:aea17db18cc3ce992be92e228d7ca4acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb3f5fad0b0a1213c3baf4ecbe393a43"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#aeb3f5fad0b0a1213c3baf4ecbe393a43">dataMessage</a> (const uint8_t *data, size_t len)</td></tr>
<tr class="memdesc:aeb3f5fad0b0a1213c3baf4ecbe393a43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds, encrypts and sends a <b>Data</b> message.  <a href="#aeb3f5fad0b0a1213c3baf4ecbe393a43">More...</a><br /></td></tr>
<tr class="separator:aeb3f5fad0b0a1213c3baf4ecbe393a43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53c88f8f72825f26a5c39da567f586a4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a53c88f8f72825f26a5c39da567f586a4">processDownstreamData</a> (const uint8_t mac[6], const uint8_t *buf, size_t count)</td></tr>
<tr class="memdesc:a53c88f8f72825f26a5c39da567f586a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes downstream data from gateway.  <a href="#a53c88f8f72825f26a5c39da567f586a4">More...</a><br /></td></tr>
<tr class="separator:a53c88f8f72825f26a5c39da567f586a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8f6bce09744fbf0781b2381d209b447"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#af8f6bce09744fbf0781b2381d209b447">manageMessage</a> (const uint8_t *mac, const uint8_t *buf, uint8_t count)</td></tr>
<tr class="memdesc:af8f6bce09744fbf0781b2381d209b447"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process every received message.  <a href="#af8f6bce09744fbf0781b2381d209b447">More...</a><br /></td></tr>
<tr class="separator:af8f6bce09744fbf0781b2381d209b447"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f4bc30f25632542530257a19664b8f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a4f4bc30f25632542530257a19664b8f7">getStatus</a> (u8 *mac_addr, u8 status)</td></tr>
<tr class="memdesc:a4f4bc30f25632542530257a19664b8f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functrion to debug send status.  <a href="#a4f4bc30f25632542530257a19664b8f7">More...</a><br /></td></tr>
<tr class="separator:a4f4bc30f25632542530257a19664b8f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:ac0c5b5055dec1811959c0b992e2dcfe4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#ac0c5b5055dec1811959c0b992e2dcfe4">rx_cb</a> (u8 *mac_addr, u8 *data, u8 len)</td></tr>
<tr class="memdesc:ac0c5b5055dec1811959c0b992e2dcfe4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that will be called anytime this node receives a message.  <a href="#ac0c5b5055dec1811959c0b992e2dcfe4">More...</a><br /></td></tr>
<tr class="separator:ac0c5b5055dec1811959c0b992e2dcfe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0da0edfe6f8319103b9a401753bc1485"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a0da0edfe6f8319103b9a401753bc1485">tx_cb</a> (u8 *mac_addr, u8 status)</td></tr>
<tr class="memdesc:a0da0edfe6f8319103b9a401753bc1485"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that will be called anytime this node sends a message to indicate status result of sending process.  <a href="#a0da0edfe6f8319103b9a401753bc1485">More...</a><br /></td></tr>
<tr class="separator:a0da0edfe6f8319103b9a401753bc1485"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aa23a4d05eee44beb862682e3ea9ab1ac"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#aa23a4d05eee44beb862682e3ea9ab1ac">gateway</a> [6]</td></tr>
<tr class="memdesc:aa23a4d05eee44beb862682e3ea9ab1ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gateway address to sent messages to.  <a href="#aa23a4d05eee44beb862682e3ea9ab1ac">More...</a><br /></td></tr>
<tr class="separator:aa23a4d05eee44beb862682e3ea9ab1ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6ce6c154c16e61977f5801ef5f9d697"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNode.html">Node</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#ad6ce6c154c16e61977f5801ef5f9d697">node</a></td></tr>
<tr class="memdesc:ad6ce6c154c16e61977f5801ef5f9d697"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sensor node abstraction to store context.  <a href="#ad6ce6c154c16e61977f5801ef5f9d697">More...</a><br /></td></tr>
<tr class="separator:ad6ce6c154c16e61977f5801ef5f9d697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d89fb89da2e474c816c74d5da38e9fa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a5d89fb89da2e474c816c74d5da38e9fa">flashBlue</a> = false</td></tr>
<tr class="memdesc:a5d89fb89da2e474c816c74d5da38e9fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true Tx LED will be flashed.  <a href="#a5d89fb89da2e474c816c74d5da38e9fa">More...</a><br /></td></tr>
<tr class="separator:a5d89fb89da2e474c816c74d5da38e9fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4feaa9f155e6ba6bc3a285af6c7cbfaf"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a4feaa9f155e6ba6bc3a285af6c7cbfaf">led</a> = -1</td></tr>
<tr class="memdesc:a4feaa9f155e6ba6bc3a285af6c7cbfaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">IO Pin that corresponds to Tx LED. Default value disables LED. It is initialized with <code>setLed</code> method.  <a href="#a4feaa9f155e6ba6bc3a285af6c7cbfaf">More...</a><br /></td></tr>
<tr class="separator:a4feaa9f155e6ba6bc3a285af6c7cbfaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add7a90136eb634cd046ad8ba23921935"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#add7a90136eb634cd046ad8ba23921935">ledOnTime</a></td></tr>
<tr class="memdesc:add7a90136eb634cd046ad8ba23921935"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time that LED is On during flash. Initalized on <code>setLed</code>  <a href="#add7a90136eb634cd046ad8ba23921935">More...</a><br /></td></tr>
<tr class="separator:add7a90136eb634cd046ad8ba23921935"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cd4017262a13d7030faed27bac50a74"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a9cd4017262a13d7030faed27bac50a74">channel</a> = 3</td></tr>
<tr class="memdesc:a9cd4017262a13d7030faed27bac50a74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Comms channel to transmit on.  <a href="#a9cd4017262a13d7030faed27bac50a74">More...</a><br /></td></tr>
<tr class="separator:a9cd4017262a13d7030faed27bac50a74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ae297c2db34105e0a0021241c0c509"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classComms__halClass.html">Comms_halClass</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#af9ae297c2db34105e0a0021241c0c509">comm</a></td></tr>
<tr class="memdesc:af9ae297c2db34105e0a0021241c0c509"><td class="mdescLeft">&#160;</td><td class="mdescRight">Comms abstraction layer.  <a href="#af9ae297c2db34105e0a0021241c0c509">More...</a><br /></td></tr>
<tr class="separator:af9ae297c2db34105e0a0021241c0c509"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bc9e3da469d24eb556921ff67dcb9ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="EnigmaIOTSensor_8h.html#a0cc35f87b85e305db04de5c4d77018c7">onSensorDataRx_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a2bc9e3da469d24eb556921ff67dcb9ca">notifyData</a></td></tr>
<tr class="memdesc:a2bc9e3da469d24eb556921ff67dcb9ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback that will be called on every message reception.  <a href="#a2bc9e3da469d24eb556921ff67dcb9ca">More...</a><br /></td></tr>
<tr class="separator:a2bc9e3da469d24eb556921ff67dcb9ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9832cbbffb139ad08d037f509d214fec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="EnigmaIOTSensor_8h.html#a37ce04fd79315c001e113198fab23386">onConnected_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a9832cbbffb139ad08d037f509d214fec">notifyConnection</a></td></tr>
<tr class="memdesc:a9832cbbffb139ad08d037f509d214fec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback that will be called anytime a new node is registered.  <a href="#a9832cbbffb139ad08d037f509d214fec">More...</a><br /></td></tr>
<tr class="separator:a9832cbbffb139ad08d037f509d214fec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a110ec07bf02ad212ae7f59fb84a6a344"><td class="memItemLeft" align="right" valign="top"><a class="el" href="EnigmaIOTSensor_8h.html#ac989871ff2fef9419b7b3917b270ea26">onDisconnected_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a110ec07bf02ad212ae7f59fb84a6a344">notifyDisconnection</a></td></tr>
<tr class="memdesc:a110ec07bf02ad212ae7f59fb84a6a344"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback that will be called anytime a node is disconnected.  <a href="#a110ec07bf02ad212ae7f59fb84a6a344">More...</a><br /></td></tr>
<tr class="separator:a110ec07bf02ad212ae7f59fb84a6a344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1315e688792578c58e5f60cf77250e7d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a1315e688792578c58e5f60cf77250e7d">useCounter</a> = true</td></tr>
<tr class="memdesc:a1315e688792578c58e5f60cf77250e7d"><td class="mdescLeft">&#160;</td><td class="mdescRight"><code>true</code> means that data message counter will be used to mark message order  <a href="#a1315e688792578c58e5f60cf77250e7d">More...</a><br /></td></tr>
<tr class="separator:a1315e688792578c58e5f60cf77250e7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadc63a108f737693784bef26dae601fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrtcmem__data__t.html">rtcmem_data_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#aadc63a108f737693784bef26dae601fe">rtcmem_data</a></td></tr>
<tr class="memdesc:aadc63a108f737693784bef26dae601fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Context data to be stored on persistent storage.  <a href="#aadc63a108f737693784bef26dae601fe">More...</a><br /></td></tr>
<tr class="separator:aadc63a108f737693784bef26dae601fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95a7601fdbe78b408c2e4882ba9b9874"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a95a7601fdbe78b408c2e4882ba9b9874">sleepRequested</a> = false</td></tr>
<tr class="memdesc:a95a7601fdbe78b408c2e4882ba9b9874"><td class="mdescLeft">&#160;</td><td class="mdescRight"><code>true</code> means that this node will sleep as soon a message is sent and downlink wait time has passed  <a href="#a95a7601fdbe78b408c2e4882ba9b9874">More...</a><br /></td></tr>
<tr class="separator:a95a7601fdbe78b408c2e4882ba9b9874"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab569bb4f40633f1d60481e4817cf7c1d"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#ab569bb4f40633f1d60481e4817cf7c1d">sleepTime</a></td></tr>
<tr class="memdesc:ab569bb4f40633f1d60481e4817cf7c1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time in microseconds that this node will be slept between measurements.  <a href="#ab569bb4f40633f1d60481e4817cf7c1d">More...</a><br /></td></tr>
<tr class="separator:ab569bb4f40633f1d60481e4817cf7c1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad01231eb904434f10ab7d293d8a73a5a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#ad01231eb904434f10ab7d293d8a73a5a">dataMessageSent</a> [<a class="el" href="lib_2config_8h.html#ab234d1358562b66925fb7223c087556b">MAX_MESSAGE_LENGTH</a>]</td></tr>
<tr class="memdesc:ad01231eb904434f10ab7d293d8a73a5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer where sent message is stored in case of retransmission is needed.  <a href="#ad01231eb904434f10ab7d293d8a73a5a">More...</a><br /></td></tr>
<tr class="separator:ad01231eb904434f10ab7d293d8a73a5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba9301800610ee971f9aa76655b8511"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a8ba9301800610ee971f9aa76655b8511">dataMessageSentLength</a> = 0</td></tr>
<tr class="memdesc:a8ba9301800610ee971f9aa76655b8511"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message length stored for use in case of message retransmission is needed.  <a href="#a8ba9301800610ee971f9aa76655b8511">More...</a><br /></td></tr>
<tr class="separator:a8ba9301800610ee971f9aa76655b8511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3efd703a4066b5e4c0cb6099eed4e079"><td class="memItemLeft" align="right" valign="top"><a class="el" href="EnigmaIOTSensor_8h.html#aec9e5a1bf0ed7f6cb25f7b940fa8d939">sensorInvalidateReason_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEnigmaIOTSensorClass.html#a3efd703a4066b5e4c0cb6099eed4e079">invalidateReason</a> = <a class="el" href="EnigmaIOTSensor_8h.html#aec9e5a1bf0ed7f6cb25f7b940fa8d939a8216aa4b3a817cdf8c15ed32aa946e83">UNKNOWN_ERROR</a></td></tr>
<tr class="memdesc:a3efd703a4066b5e4c0cb6099eed4e079"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last key invalidation reason.  <a href="#a3efd703a4066b5e4c0cb6099eed4e079">More...</a><br /></td></tr>
<tr class="separator:a3efd703a4066b5e4c0cb6099eed4e079"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main sensor node class. Manages communication with gateway and allows sending and receiving user data. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00079">79</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ad429c9d6b530fc34622109c851fd9f2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad429c9d6b530fc34622109c851fd9f2f">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EnigmaIOTSensorClass::begin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classComms__halClass.html">Comms_halClass</a> *&#160;</td>
          <td class="paramname"><em>comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>gateway</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useCounter</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>sleepy</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initalizes communication basic data and starts node registration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm</td><td>Physical layer to be used on this node network </td></tr>
    <tr><td class="paramname">gateway</td><td>Gateway address </td></tr>
    <tr><td class="paramname">useCounter</td><td>Indicates if a counter has to be added to every message data to check message sequence. <code>true</code> by default </td></tr>
    <tr><td class="paramname">sleepy</td><td>Indicates if this node changes to low energy mode (sleep mode) after sending a data message. <code>true</code> by default</td></tr>
  </table>
  </dd>
</dl>
<p>This condition is signalled to Gateway during registration so that downlink messages are managed diferently. On non sleepy nodes a downlink data message can be sent on any moment as node will be always awake. But for nodes that sleep, normally those that are powered with batteries, downlink message will be queued on gateway and sent just after an uplink data message from node has been sent </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00016">16</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="a2169866121e8aded5e7970717acdaed8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2169866121e8aded5e7970717acdaed8">&#9670;&nbsp;</a></span>checkCRC()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool EnigmaIOTSensorClass::checkCRC </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>crc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check that a given CRC matches to calulated value from a buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Pointer to the buffer that contains the stream to calculate CRC </td></tr>
    <tr><td class="paramname">count</td><td>Buffer length in number of bytes </td></tr>
    <tr><td class="paramname">crc</td><td>Received CRC to check against calculation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns <code>true</code> if CRC check was successful. <code>false</code> otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00103">103</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="a7df5872c61adb030459e2186e162956d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7df5872c61adb030459e2186e162956d">&#9670;&nbsp;</a></span>clientHello()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool EnigmaIOTSensorClass::clientHello </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build a <b>ClientHello</b> messange and send it to gateway. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns <code>true</code> if ClientHello message was successfully sent. <code>false</code> otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00113">113</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="aeb3f5fad0b0a1213c3baf4ecbe393a43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb3f5fad0b0a1213c3baf4ecbe393a43">&#9670;&nbsp;</a></span>dataMessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool EnigmaIOTSensorClass::dataMessage </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds, encrypts and sends a <b>Data</b> message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Buffer to store payload to be sent </td></tr>
    <tr><td class="paramname">len</td><td>Length of payload data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns <code>true</code> if message could be correcly sent </dd></dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00327">327</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="a4f4bc30f25632542530257a19664b8f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f4bc30f25632542530257a19664b8f7">&#9670;&nbsp;</a></span>getStatus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void EnigmaIOTSensorClass::getStatus </td>
          <td>(</td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>mac_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Functrion to debug send status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mac_addr</td><td>Address of message sender </td></tr>
    <tr><td class="paramname">status</td><td>Result status code </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00554">554</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="aae9fad86d2a2a409f98a22016a85e381"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae9fad86d2a2a409f98a22016a85e381">&#9670;&nbsp;</a></span>handle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EnigmaIOTSensorClass::handle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method should be called periodically for instance inside <code><a class="el" href="enigmaiot__gateway_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop()</a></code> function. It is used for internal node maintenance tasks. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00051">51</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="aea17db18cc3ce992be92e228d7ca4acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea17db18cc3ce992be92e228d7ca4acc">&#9670;&nbsp;</a></span>keyExchangeFinished()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool EnigmaIOTSensorClass::keyExchangeFinished </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build and send a <b>keyExchangeFinished</b> message. </p>
<p>It includes some random data that is encrypted with a CRC to check integrity. This message is used to let Gateway if this node generated the correct shared key. </p><dl class="section return"><dt>Returns</dt><dd>Returns <code>true</code> if message could be correcly sent </dd></dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00259">259</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="af8f6bce09744fbf0781b2381d209b447"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8f6bce09744fbf0781b2381d209b447">&#9670;&nbsp;</a></span>manageMessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void EnigmaIOTSensorClass::manageMessage </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>mac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process every received message. </p>
<p>It starts clasiffying message usint the first byte. After that it passes it to the corresponding method for decoding </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mac</td><td>Address of message sender </td></tr>
    <tr><td class="paramname">buf</td><td>Buffer that stores message bytes </td></tr>
    <tr><td class="paramname">count</td><td>Length of message in number of bytes </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00471">471</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="abc43b1a7a07c09b20478b918c9ee2e79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc43b1a7a07c09b20478b918c9ee2e79">&#9670;&nbsp;</a></span>onConnected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void EnigmaIOTSensorClass::onConnected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="EnigmaIOTSensor_8h.html#a37ce04fd79315c001e113198fab23386">onConnected_t</a>&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines a function callback that will be called everytime node is registered on gateway. </p>
<p>Use example: </p><div class="fragment"><div class="line"><span class="comment">// First define the callback function</span></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="enigmaiot__sensor_8ino.html#a940f8c4df553df52c9145ef2df107ad3">connectEventHandler</a> () {</div><div class="line">  <span class="comment">// Do whatever you need to process disconnecion</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="enigmaiot__gateway_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> () {</div><div class="line">  .....</div><div class="line">  <span class="comment">// Now register function as data message handler</span></div><div class="line">  <a class="code" href="EnigmaIOTSensor_8cpp.html#a88a62c62a87971903417287b1b917a20">EnigmaIOTSensor</a>.<a class="code" href="classEnigmaIOTSensorClass.html#abc43b1a7a07c09b20478b918c9ee2e79">onConnected</a> (<a class="code" href="enigmaiot__sensor_8ino.html#a940f8c4df553df52c9145ef2df107ad3">connectEventHandler</a>);</div><div class="line">  .....</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="enigmaiot__gateway_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a> {</div><div class="line">  .....</div><div class="line">}</div></div><!-- fragment --> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>Pointer to the function </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00287">287</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="abbdb3e0b4a47b285a35430dcc38246e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbdb3e0b4a47b285a35430dcc38246e7">&#9670;&nbsp;</a></span>onDataRx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void EnigmaIOTSensorClass::onDataRx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="EnigmaIOTSensor_8h.html#a0cc35f87b85e305db04de5c4d77018c7">onSensorDataRx_t</a>&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines a function callback that will be called on every downlink data message that is received from gateway. </p>
<p>Use example: </p><div class="fragment"><div class="line"><span class="comment">// First define the callback function</span></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="enigmaiot__gateway_8ino.html#a3d1862e85b946eaac15c4f8aa4ecbcd8">processRxData</a> (<span class="keyword">const</span> uint8_t* mac, <span class="keyword">const</span> uint8_t* buffer, uint8_t length) {</div><div class="line">  <span class="comment">// Do whatever you need with received data</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="enigmaiot__gateway_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> () {</div><div class="line">  .....</div><div class="line">  <span class="comment">// Now register function as data message handler</span></div><div class="line">  <a class="code" href="EnigmaIOTSensor_8cpp.html#a88a62c62a87971903417287b1b917a20">EnigmaIOTSensor</a>.<a class="code" href="classEnigmaIOTSensorClass.html#abbdb3e0b4a47b285a35430dcc38246e7">onDataRx</a> (<a class="code" href="enigmaiot__gateway_8ino.html#a3d1862e85b946eaac15c4f8aa4ecbcd8">processRxData</a>);</div><div class="line">  .....</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="enigmaiot__gateway_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a> {</div><div class="line">  .....</div><div class="line">}</div></div><!-- fragment --> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>Pointer to the function </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00260">260</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="a36a60078a2b6dda3ed3f832547534fc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36a60078a2b6dda3ed3f832547534fc3">&#9670;&nbsp;</a></span>onDisconnected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void EnigmaIOTSensorClass::onDisconnected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="EnigmaIOTSensor_8h.html#ac989871ff2fef9419b7b3917b270ea26">onDisconnected_t</a>&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines a function callback that will be called everytime node is disconnected from gateway. </p>
<p>Deregistration is always started by gateway due syntax or encryption error or in case of key validity is over.</p>
<p>Use example: </p><div class="fragment"><div class="line"><span class="comment">// First define the callback function</span></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="enigmaiot__sensor_8ino.html#a6f74da8da4899c962666353e8cb4e3d6">disconnectEventHandler</a> () {</div><div class="line">  <span class="comment">// Do whatever you need to process disconnecion</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="enigmaiot__gateway_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> () {</div><div class="line">  .....</div><div class="line">  <span class="comment">// Now register function as data message handler</span></div><div class="line">  <a class="code" href="EnigmaIOTSensor_8cpp.html#a88a62c62a87971903417287b1b917a20">EnigmaIOTSensor</a>.<a class="code" href="classEnigmaIOTSensorClass.html#a36a60078a2b6dda3ed3f832547534fc3">onDisconnected</a> (<a class="code" href="enigmaiot__sensor_8ino.html#a6f74da8da4899c962666353e8cb4e3d6">disconnectEventHandler</a>);</div><div class="line">  .....</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="enigmaiot__gateway_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a> {</div><div class="line">  .....</div><div class="line">}</div></div><!-- fragment --> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>Pointer to the function </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00316">316</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="afa01e608909a74a2ab03c1715631d594"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa01e608909a74a2ab03c1715631d594">&#9670;&nbsp;</a></span>processCipherFinished()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool EnigmaIOTSensorClass::processCipherFinished </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>mac</em>[6], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a buffer containing a <b>CipherFinished</b> message and process it. It checks that gateway key is correct by decrypting this message random payload. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mac</td><td>Address where this message was received from </td></tr>
    <tr><td class="paramname">buf</td><td>Pointer to the buffer that contains the message </td></tr>
    <tr><td class="paramname">count</td><td>Message length in number of bytes of CipherFinished message </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns <code>true</code> if message syntax is correct and key was successfuly calculated <code>false</code> otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00208">208</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="a53c88f8f72825f26a5c39da567f586a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53c88f8f72825f26a5c39da567f586a4">&#9670;&nbsp;</a></span>processDownstreamData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool EnigmaIOTSensorClass::processDownstreamData </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>mac</em>[6], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Processes downstream data from gateway. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mac</td><td>Gateway address </td></tr>
    <tr><td class="paramname">buf</td><td>Buffer to store received payload </td></tr>
    <tr><td class="paramname">count</td><td>Length of payload data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns <code>true</code> if message could be correcly decoded </dd></dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00405">405</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="ac232abe8c29f115acfb080e65e4511ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac232abe8c29f115acfb080e65e4511ff">&#9670;&nbsp;</a></span>processInvalidateKey()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="EnigmaIOTSensor_8h.html#aec9e5a1bf0ed7f6cb25f7b940fa8d939">sensorInvalidateReason_t</a> EnigmaIOTSensorClass::processInvalidateKey </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>mac</em>[6], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a buffer containing an <b>InvalidateKey</b> message and process it. This trigger a new key agreement to start. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mac</td><td>Address where this message was received from </td></tr>
    <tr><td class="paramname">buf</td><td>Pointer to the buffer that contains the message </td></tr>
    <tr><td class="paramname">count</td><td>Message length in number of bytes of InvalidateKey message </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the reason because key is not valid anymore. Check possible values in sensorInvalidateReason_t </dd></dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00461">461</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="ad074353ba790ddfd4214b39b517861df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad074353ba790ddfd4214b39b517861df">&#9670;&nbsp;</a></span>processServerHello()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool EnigmaIOTSensorClass::processServerHello </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>mac</em>[6], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a buffer containing a <b>ServerHello</b> message and process it. It uses that message to calculate a shared key using Diffie Hellman algorithm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mac</td><td>Address where this message was received from </td></tr>
    <tr><td class="paramname">buf</td><td>Pointer to the buffer that contains the message </td></tr>
    <tr><td class="paramname">count</td><td>Message length in number of bytes of ServerHello message </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns <code>true</code> if message could be correcly processed </dd></dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00168">168</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="ac0c5b5055dec1811959c0b992e2dcfe4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0c5b5055dec1811959c0b992e2dcfe4">&#9670;&nbsp;</a></span>rx_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void EnigmaIOTSensorClass::rx_cb </td>
          <td>(</td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>mac_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function that will be called anytime this node receives a message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mac_addr</td><td>Address of message sender </td></tr>
    <tr><td class="paramname">data</td><td>Buffer that stores message bytes </td></tr>
    <tr><td class="paramname">len</td><td>Length of message in number of bytes </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00095">95</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="a66162b98fc51e16f36c53c4eddd83f04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66162b98fc51e16f36c53c4eddd83f04">&#9670;&nbsp;</a></span>sendData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EnigmaIOTSensorClass::sendData </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts a data message transmission. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Payload buffer </td></tr>
    <tr><td class="paramname">len</td><td>Payload length </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00308">308</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="a3b81bcdafcd5e2d1f0443668ec0e9b68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b81bcdafcd5e2d1f0443668ec0e9b68">&#9670;&nbsp;</a></span>setLed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EnigmaIOTSensorClass::setLed </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>led</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>onTime</em> = <code>100</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets a LED to be flashed every time a message is transmitted. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">led</td><td>LED I/O pin </td></tr>
    <tr><td class="paramname">onTime</td><td>Flash duration. 100ms by default. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00011">11</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="ae1d728febf16f6dfd479c36947a789b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1d728febf16f6dfd479c36947a789b1">&#9670;&nbsp;</a></span>sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EnigmaIOTSensorClass::sleep </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Requests transition to sleep mode (low energy state) </p>
<p>Sleep can be requested in any moment and will be triggered inmediatelly except if node is doing registration or is waiting for downlink </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>Sleep mode state duration </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00320">320</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<a id="a0da0edfe6f8319103b9a401753bc1485"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0da0edfe6f8319103b9a401753bc1485">&#9670;&nbsp;</a></span>tx_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void EnigmaIOTSensorClass::tx_cb </td>
          <td>(</td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>mac_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function that will be called anytime this node sends a message to indicate status result of sending process. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mac_addr</td><td>Address of message destination </td></tr>
    <tr><td class="paramname">status</td><td>Result of sending process </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8cpp_source.html#l00099">99</a> of file <a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a9cd4017262a13d7030faed27bac50a74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cd4017262a13d7030faed27bac50a74">&#9670;&nbsp;</a></span>channel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t EnigmaIOTSensorClass::channel = 3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Comms channel to transmit on. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00087">87</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="af9ae297c2db34105e0a0021241c0c509"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9ae297c2db34105e0a0021241c0c509">&#9670;&nbsp;</a></span>comm</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classComms__halClass.html">Comms_halClass</a>* EnigmaIOTSensorClass::comm</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Comms abstraction layer. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00088">88</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="ad01231eb904434f10ab7d293d8a73a5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad01231eb904434f10ab7d293d8a73a5a">&#9670;&nbsp;</a></span>dataMessageSent</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t EnigmaIOTSensorClass::dataMessageSent[<a class="el" href="lib_2config_8h.html#ab234d1358562b66925fb7223c087556b">MAX_MESSAGE_LENGTH</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Buffer where sent message is stored in case of retransmission is needed. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00096">96</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="a8ba9301800610ee971f9aa76655b8511"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ba9301800610ee971f9aa76655b8511">&#9670;&nbsp;</a></span>dataMessageSentLength</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t EnigmaIOTSensorClass::dataMessageSentLength = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Message length stored for use in case of message retransmission is needed. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00097">97</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="a5d89fb89da2e474c816c74d5da38e9fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d89fb89da2e474c816c74d5da38e9fa">&#9670;&nbsp;</a></span>flashBlue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool EnigmaIOTSensorClass::flashBlue = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If true Tx LED will be flashed. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00084">84</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="aa23a4d05eee44beb862682e3ea9ab1ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa23a4d05eee44beb862682e3ea9ab1ac">&#9670;&nbsp;</a></span>gateway</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t EnigmaIOTSensorClass::gateway[6]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gateway address to sent messages to. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00082">82</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="a3efd703a4066b5e4c0cb6099eed4e079"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3efd703a4066b5e4c0cb6099eed4e079">&#9670;&nbsp;</a></span>invalidateReason</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="EnigmaIOTSensor_8h.html#aec9e5a1bf0ed7f6cb25f7b940fa8d939">sensorInvalidateReason_t</a> EnigmaIOTSensorClass::invalidateReason = <a class="el" href="EnigmaIOTSensor_8h.html#aec9e5a1bf0ed7f6cb25f7b940fa8d939a8216aa4b3a817cdf8c15ed32aa946e83">UNKNOWN_ERROR</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Last key invalidation reason. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00098">98</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="a4feaa9f155e6ba6bc3a285af6c7cbfaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4feaa9f155e6ba6bc3a285af6c7cbfaf">&#9670;&nbsp;</a></span>led</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int8_t EnigmaIOTSensorClass::led = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>IO Pin that corresponds to Tx LED. Default value disables LED. It is initialized with <code>setLed</code> method. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00085">85</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="add7a90136eb634cd046ad8ba23921935"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add7a90136eb634cd046ad8ba23921935">&#9670;&nbsp;</a></span>ledOnTime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int EnigmaIOTSensorClass::ledOnTime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Time that LED is On during flash. Initalized on <code>setLed</code> </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00086">86</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="ad6ce6c154c16e61977f5801ef5f9d697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6ce6c154c16e61977f5801ef5f9d697">&#9670;&nbsp;</a></span>node</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNode.html">Node</a> EnigmaIOTSensorClass::node</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sensor node abstraction to store context. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00083">83</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="a9832cbbffb139ad08d037f509d214fec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9832cbbffb139ad08d037f509d214fec">&#9670;&nbsp;</a></span>notifyConnection</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="EnigmaIOTSensor_8h.html#a37ce04fd79315c001e113198fab23386">onConnected_t</a> EnigmaIOTSensorClass::notifyConnection</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback that will be called anytime a new node is registered. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00090">90</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="a2bc9e3da469d24eb556921ff67dcb9ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bc9e3da469d24eb556921ff67dcb9ca">&#9670;&nbsp;</a></span>notifyData</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="EnigmaIOTSensor_8h.html#a0cc35f87b85e305db04de5c4d77018c7">onSensorDataRx_t</a> EnigmaIOTSensorClass::notifyData</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback that will be called on every message reception. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00089">89</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="a110ec07bf02ad212ae7f59fb84a6a344"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a110ec07bf02ad212ae7f59fb84a6a344">&#9670;&nbsp;</a></span>notifyDisconnection</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="EnigmaIOTSensor_8h.html#ac989871ff2fef9419b7b3917b270ea26">onDisconnected_t</a> EnigmaIOTSensorClass::notifyDisconnection</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback that will be called anytime a node is disconnected. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00091">91</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="aadc63a108f737693784bef26dae601fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadc63a108f737693784bef26dae601fe">&#9670;&nbsp;</a></span>rtcmem_data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrtcmem__data__t.html">rtcmem_data_t</a> EnigmaIOTSensorClass::rtcmem_data</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Context data to be stored on persistent storage. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00093">93</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="a95a7601fdbe78b408c2e4882ba9b9874"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95a7601fdbe78b408c2e4882ba9b9874">&#9670;&nbsp;</a></span>sleepRequested</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool EnigmaIOTSensorClass::sleepRequested = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>true</code> means that this node will sleep as soon a message is sent and downlink wait time has passed </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00094">94</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="ab569bb4f40633f1d60481e4817cf7c1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab569bb4f40633f1d60481e4817cf7c1d">&#9670;&nbsp;</a></span>sleepTime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t EnigmaIOTSensorClass::sleepTime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Time in microseconds that this node will be slept between measurements. </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00095">95</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<a id="a1315e688792578c58e5f60cf77250e7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1315e688792578c58e5f60cf77250e7d">&#9670;&nbsp;</a></span>useCounter</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool EnigmaIOTSensorClass::useCounter = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>true</code> means that data message counter will be used to mark message order </p>

<p class="definition">Definition at line <a class="el" href="EnigmaIOTSensor_8h_source.html#l00092">92</a> of file <a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="EnigmaIOTSensor_8h_source.html">EnigmaIOTSensor.h</a></li>
<li>src/<a class="el" href="EnigmaIOTSensor_8cpp_source.html">EnigmaIOTSensor.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
